!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):"undefined"!=typeof window?window.masonry=a():"undefined"!=typeof global?global.masonry=a():"undefined"!=typeof self&&(self.masonry=a())}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a,b){this.x=Number(a),this.y=Number(b)}b.exports=c},{}],2:[function(a,b){function c(a,b){this._nCols=a,this._matrix=b||[]}var d=a("./layout-point");c.prototype._findNextFreePoint=function(a){var b,c,e,f,g,h;for(a||(a=0),c=0,h=this._matrix,g=0;g<h.length;g++)for(b=h[g],f=0;f<b.length;f++)if(e=b[f],!e&&a<=c++)return new d(f,g);return new d(0,h.length)},c.prototype._addNewRow=function(){var a=this._matrix.length;this._matrix[a]=[];for(var b=0;b<this._nCols;b++)this._matrix[a][b]=0},c.prototype._checkIfPointFitsRect=function(a,b,c){var d,e,f,g,h,i,j;j=this._matrix,e=a.x,f=a.y;var k=e+b>this._nCols;if(k)return!1;for(d=0;c>d;d++){if(i=f+d,!j[i])return!0;for(g=0;b>g;g++)if(h=e+g,1===j[i][h])return!1}return!0},c.prototype.getPositionForRect=function(a,b){var c,d,e;if(e=0,d=!1,a>this._nCols)throw new Error("Layout matrix is too small to fit any rectangle width width "+a);for(;;)if(c=this._findNextFreePoint(e++),this._checkIfPointFitsRect(c,a,b))return c;return c},c.prototype.addRect=function(a,b){var c,d,e=this.getPositionForRect(a,b),f=e.y,g=e.x;for(c=0;b>c;c++)for(this._matrix[f+c]||this._addNewRow(),d=0;a>d;d++)this._matrix[f+c][d+g]=1;return e},b.exports=c},{"./layout-point":1}],3:[function(a,b){function c(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a,b){this.elementID=a,this.element=document.getElementById(a),this.options={},this.options=c(this.options,f),this.options=c(this.options,b),this.reLayout()}var e=a("./lib/layout"),f={columnWidth:100,gutter:20};d.prototype.filterItems=function(){this.filteredItems=this.items.slice(0)},d.prototype.sortItems=function(){},d.prototype.setItemPosition=function(a,b,c){b+="px",c+="px";var d="absolute"!==a.style.position;d&&(a.style.position="absolute",a.style.display="none",a.offsetHeight,a.style.display="block"),a.style.webkitTransform="translate3d("+b+","+c+",0)"},d.prototype.positionItemToPoint=function(a,b){var c=b.x*this.options.columnWidth,d=b.y*this.rowHeight;this.setItemPosition(a,c,d)},d.prototype.calculateRowHeight=function(){for(var a=this.items.length,b=200,c=0;a>c;c++){var d=this.items[c],e=d.offsetHeight;e&&(b=Math.min(b,d.offsetHeight))}this.rowHeight=b},d.prototype.reLayout=function(){this.items=[].slice.call(this.element.children),this.filterItems(),this.sortItems(),this.calculateRowHeight();for(var a=Math.floor(this.element.offsetWidth/this.options.columnWidth),b=new e(a),c=this.items.length,d=0;c>d;d++){var f=this.items[d],g=Math.ceil(f.offsetWidth/this.options.columnWidth),h=Math.ceil(f.offsetHeight/this.rowHeight),i=b.addRect(g,h);this.positionItemToPoint(f,i)}},b.exports=d},{"./lib/layout":2}]},{},[3])(3)});